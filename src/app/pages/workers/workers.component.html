<div class="container mt-3">

	<mat-form-field>
	  	<mat-label>List length</mat-label>
	  	<input matInput [(ngModel)]="length" (change)="changeTotal($event)" type="number">
	</mat-form-field>

	<mat-form-field>
	  	<mat-label>Page size</mat-label>
	  	<input matInput [(ngModel)]="pageSize" (change)="changePageSize($event)" type="number">
	</mat-form-field>

	<mat-form-field>
	  	<mat-label>Page size options</mat-label>
	  	<input matInput [ngModel]="pageSizeOptions" (ngModelChange)="setPageSizeOptions($event)"
		         [ngModelOptions]="{updateOn: 'blur'}" placeholder="Ex. 10,25,50">
	</mat-form-field>

	<mat-form-field class="full-width">
	  	<mat-label>Filter</mat-label>
	  	<input matInput (change)="applyFilter($event)" placeholder="Enter filter name and subname">
	</mat-form-field>

	<table class="mat-table-data" mat-table [dataSource]="sortedData" multiTemplateDataRows restApi="dev.vn/api/employees" totalCount="all" pageSize="5" pageSizeOptions="5,10,15,25,50,100" matSort (matSortChange)="sortData($event)">

		<ng-container matColumnDef="{{column}}" *ngFor="let column of displayedColumns">
		    <th mat-header-cell *matHeaderCellDef mat-sort-header [disabled]="isSortingDisabled(column)">
		    	<mat-checkbox *ngIf="column == 'id'" class="check-all" (change)="$event ? masterToggle() : null"
			    	[checked]="selection.hasValue() && isAllSelected()"
			    	[indeterminate]="selection.hasValue() && !isAllSelected()"></mat-checkbox>
			    {{ column!='id'?column.replace('_',' '):null }} 
			</th>
		    <td mat-cell *matCellDef="let row"> 
		    	<mat-checkbox *ngIf="column == 'id'" (click)="$event.stopPropagation()"
			    	(change)="$event ? selection.toggle(row) : null"
			    	[checked]="selection.isSelected(row)"
                    [aria-label]="checkboxLabel(row)">
                </mat-checkbox>
			    {{ column!='id'?(column=='name'?(row.name+' '+row.subname):row[column]):null }} 
			</td>
	  	</ng-container>
	
		<ng-container matColumnDef="expandedDetail">
		    <td mat-cell *matCellDef="let row" [attr.colspan]="displayedColumns.length">
		      	<div class="example-element-detail" [@detailExpand]="row == expandedElement ? 'expanded' : 'collapsed'"
		      	[innerHTML]="(row.blog_title!=null?row.blog_title:'<h1>Data is not availbility now</h1>')+'<br/>'+(row.blog_content!=null?row.blog_content:'')">
		     	</div>
		    </td>
	  	</ng-container>

	  	<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  		<tr mat-row *matRowDef="let row; columns: displayedColumns;" [ngClass]="setClass(row)"
  		[class.example-expanded-row]="expandedElement === row"
  		(click)="expandedElement = expandedElement === row ? null : ( row.status==1?null:row )"></tr>
  		<tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
	</table>

	<div class="paginator-footer">
		<div *ngIf="pageEvent" class="paginator-event">
		  Page Change Event Properties | List length: {{pageEvent.length}} | Page size: {{pageEvent.pageSize}}
		  | Page index: {{pageEvent.pageIndex}}
		</div>
		<mat-paginator [length]="length" [pageSize]="pageSize"
		    [pageSizeOptions]="pageSizeOptions" (page)="changePage($event)">
		</mat-paginator>
	</div>
</div>
